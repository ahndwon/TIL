# Ch5_distributed_environment
## 분산 환경에서의 Workflow
**분산형(git)**
* 구조가 유연 -> 여러 개발자가 함께 작업하기 좋음
* 각 개발자의 저장소가 하나의 노드 & 중앙 저장소
* 모든 개발자는 다른 개발자의 저장소에 일한 내용을 전송 가능
* 또는 자신의 저장소 위치를 다른 개발자들에게 공개 가능
* 프로젝트나 팀이 코드를 운영할 떄 다양한 Workflow를 만들 수 있도록 함.


**중앙집중형**
* 각 개발자는 중앙 저장소를 중심으로 하는 하나의 노드일 뿐.
* 보통 중앙집중식 협업 모델 한가지 방식 만 존재 -> 변경 사항이 모두 중앙 저장소에 집중됨


### Integration-Manager Workflow
Git을 사용하면 리모트 저장소 여러 개 운영 가능
다른 개발자에겐 읽기 권한만 주어지는 Workflow도 가능

**Workflow**
1. 프로젝트 Integration-Manager는 프로젝트 메인저장소에 Push를 한다. 

2. 프로젝트 기여자는 메인저장소를 Clone하고 수정한다. 

3. 기여자는 자신의 저장소에 Push 하고 Integration-Manager가 접근할 수 있도록 공개해 놓는다. 

4. 기여자는 Integration-Manager에게 변경사항을 적용해 줄 것을 E-mail 같은 것으로 요청한다. 

5. Integration-Manager는 기여자의 저장소를 리모트 저장소로 등록하고 수정사항을 Merge 하여 테스트한다. 

6. Integration-Manager는 Merge한 사항을 메인저장소에 Push한다.

이 방식은 Github이나 GitLab 같은 Hub 사이트를 통해 주로 사용하는 방식이다.
프로젝트를 Fork하고 수정사항을 반영하여 다시 모두에게 공개하기 좋은 구조임

**장점**
* 기여자와 Integration-Manager가 각자의 사정에 맞춰 프로젝트를 유지할 수 있다는 점.
* 기여자는 자신의 저장소와 브랜치에서 수정 작업을 계속해 나갈 수 있고 수정사항이 프로젝트에 반영되도록 기다릴 필요가 없다.
* 관리자는 기여자가 Push 한 커밋을 적절한 시점에 Merge함


### Dictator and Lieutenants Workflow
* 저장소를 여러개 운영하는 방식을 변형한 구조
* 보통 수백 명의 개발자가 참여하는 아주 큰 프로젝트를 운영 시 사용 (ex : Linux 커널 프로젝트)
* Lieutenants - 여러 Integration-Manager가 저장소에서 자신이 맡은 부분
	* 모든 Lieutenant는 최종 관리자(Dictator) 아래에 있다
* 공식 저장소 - 최종 관리자가 관리하는 저장소


**Workflow**
1. 개발자는 코드를 수정하고 master브랜치를 기준으로 자신의 토픽 브랜치를 Rebase 한다. 여기서 master 브랜치란 Dictator의 브랜치를 말한다. 

2. Lieutenant들은 개발자들의 수정사항을 자신이 관리하는 master 브랜치에 Merge 한다. 

3. Dictator는 Lieutenant의 master 브랜치를 자신의 master 브랜치로 Merge 한다. 

4. Dictator는 Merge 한 자신의 master 브랜치를 Push 하며 다른 모든 개발자는 Dictator의 master 브랜치를 기준으로 Rebase 한다. 


## 프로젝트에 기여하기
프로젝트에 기여하는 방식은 매우 다양하기에 설명하기 어려움.

**프로젝트 기여 변수**
1. 활발히 활동하는 개발자의 수
	* 얼마나 많은 개발자가 얼마나 자주 코드를 쏟아 내는가
	* 개발자가 많아질수록 코드를 깔끔하게 적용하거나 Merge하기 어려워짐
2. 프로젝트에서 선택한 저장소 운영 방식(Workflow)
3. 접근 권한
	* 쓰기 권한 , 읽기 권한 유무에 따라 프로젝트 기여 방식이 매우 달라짐
	

### 커밋 가이드라인
Git 프로젝트의 *Documentation/SubmittingPatches* 문서를 참고 

1. 공백문자를 깨끗하게 정리하고 커밋
`git diff --check`로 공백 문자에 대한 오류를 확인할 수 있음.

2. 각 커밋은 논리적으로 구분되는 Changeset 
	* 최대한 수정사항을 하나의 주제로 요약할 수 있어야 함
	* 여러가지 이슈를 한꺼번에 수정해도 Staging Area를 이용하여 한 커밋에 하나의 이슈만 담기도록 해야 한다.
	* 작업 내용을 분할한다
	* 각 커밋마다 적절한 메시지를 작성
	* 같은 파일의 다른 부분을 수정하는 경우 -> `git add -patch` 명령으로 한 부분씩 나누어 Staging Area에 저장한다.

3. 커밋 메시지
	* 커밋 메시지의 첫 라인은 50자가 넘지 않아야 하고 해당 커밋을 요약해야 한다
	* 다음 한 라인을 비우고 다음 라인부터 커밋을 자세히 설명한다.
	* 현재형 표현이나 명령문을 사용하는것이 좋다.


### 비공개 소규모 팀
두세 명으로 이루어진 비공개 프로젝트
비공개 - 소스코드가 공개되지 않은 것을 말하는 것 (외부에서 접근불가는 아님)
보통 Subversion 같은 중앙집중형 버전 관리 시스템에서 사용하던 방식 사용

**가장 큰 차이점**
서버가 아닌 클라이언트 쪽에서 Merge함




#git/progit